<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[KR] 데이콘 원자력발전소 상태 판단 대회 후기 | Wonyoung's Tech Blog</title><meta name=keywords content="competition,dacon"><meta name=description content="연초, 의욕으로 가득하던 시기에 지인의 권유로 데이콘(Dacon.io)에서 주관하고 한국수력원자력에서 주최한 원자력발전소 상태판단 경진대회에 참가하게 되었다. 지인의 지인도 합류하여 팀은 총 3인으로 구성되었다. 하지만 개개인의 일정과 생업으로 인해서 진행은 각자 하되, 진행사항이나 인사이트 등은 수시로 공유하고, 제출은 팀의 이름으로 제출하는 형식으로 진행되었다. (초기의 으쌰으쌰하던 분위기와 달리 흐지부지된 감이 없잖아 있었다. 팀당 제출횟수가 하루 3회로 제한되었기 때문에, 이럴 줄 알았으면 애초에 각자의 이름으로 혼자 해도 됐겠다 싶기도 했다. 하지만 결과론적인 총평이기 때문에 패스)"><meta name=author content="Wonyoung Seo"><link rel=canonical href=https://lucaseo.github.io/posts/2020-07-05-review-dacon-nuclear-competition/><meta name=google-site-verification content="XYZabc"><link href=/assets/css/stylesheet.min.d8cbf60331b9ced42909130bf88f8b97d2eb3de242444dcc9e2df410ceb098b9.css integrity="sha256-2Mv2AzG5ztQpCRML+I+Ll9LrPeJCRE3Mni30EM6wmLk=" rel="preload stylesheet" as=style><link rel=icon href=https://lucaseo.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://lucaseo.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://lucaseo.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://lucaseo.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://lucaseo.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.80.0"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin=anonymous onload=renderMathInElement(document.body);></script><meta property="og:title" content="[KR] 데이콘 원자력발전소 상태 판단 대회 후기"><meta property="og:description" content="연초, 의욕으로 가득하던 시기에 지인의 권유로 데이콘(Dacon.io)에서 주관하고 한국수력원자력에서 주최한 원자력발전소 상태판단 경진대회에 참가하게 되었다. 지인의 지인도 합류하여 팀은 총 3인으로 구성되었다. 하지만 개개인의 일정과 생업으로 인해서 진행은 각자 하되, 진행사항이나 인사이트 등은 수시로 공유하고, 제출은 팀의 이름으로 제출하는 형식으로 진행되었다. (초기의 으쌰으쌰하던 분위기와 달리 흐지부지된 감이 없잖아 있었다. 팀당 제출횟수가 하루 3회로 제한되었기 때문에, 이럴 줄 알았으면 애초에 각자의 이름으로 혼자 해도 됐겠다 싶기도 했다. 하지만 결과론적인 총평이기 때문에 패스)"><meta property="og:type" content="article"><meta property="og:url" content="https://lucaseo.github.io/posts/2020-07-05-review-dacon-nuclear-competition/"><meta property="og:image" content="https://lucaseo.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:published_time" content="2020-07-05T14:24:01+09:00"><meta property="article:modified_time" content="2020-07-05T14:24:01+09:00"><meta property="og:site_name" content="WY's Tech Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://lucaseo.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="[KR] 데이콘 원자력발전소 상태 판단 대회 후기"><meta name=twitter:description content="연초, 의욕으로 가득하던 시기에 지인의 권유로 데이콘(Dacon.io)에서 주관하고 한국수력원자력에서 주최한 원자력발전소 상태판단 경진대회에 참가하게 되었다. 지인의 지인도 합류하여 팀은 총 3인으로 구성되었다. 하지만 개개인의 일정과 생업으로 인해서 진행은 각자 하되, 진행사항이나 인사이트 등은 수시로 공유하고, 제출은 팀의 이름으로 제출하는 형식으로 진행되었다. (초기의 으쌰으쌰하던 분위기와 달리 흐지부지된 감이 없잖아 있었다. 팀당 제출횟수가 하루 3회로 제한되었기 때문에, 이럴 줄 알았으면 애초에 각자의 이름으로 혼자 해도 됐겠다 싶기도 했다. 하지만 결과론적인 총평이기 때문에 패스)"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[KR] 데이콘 원자력발전소 상태 판단 대회 후기","name":"[KR] 데이콘 원자력발전소 상태 판단 대회 후기","description":"연초, 의욕으로 가득하던 시기에 지인의 권유로 데이콘(Dacon.io)에서 주관하고 한국수력원자력에서 주최한 원자력발전소 상태판단 경진대회에 참가하게 되었다. 지인의 지인도 합류하여 팀은 총 3인으로 구성되었다. 하지만 개개인의 일정과 생업으로 인해서 진행은 각자 하되, 진행사항이나 인사이트 등은 수시로 공유하고, …","keywords":["competition","dacon"],"articleBody":"연초, 의욕으로 가득하던 시기에 지인의 권유로 데이콘(Dacon.io)에서 주관하고 한국수력원자력에서 주최한 원자력발전소 상태판단 경진대회에 참가하게 되었다. 지인의 지인도 합류하여 팀은 총 3인으로 구성되었다. 하지만 개개인의 일정과 생업으로 인해서 진행은 각자 하되, 진행사항이나 인사이트 등은 수시로 공유하고, 제출은 팀의 이름으로 제출하는 형식으로 진행되었다. (초기의 으쌰으쌰하던 분위기와 달리 흐지부지된 감이 없잖아 있었다. 팀당 제출횟수가 하루 3회로 제한되었기 때문에, 이럴 줄 알았으면 애초에 각자의 이름으로 혼자 해도 됐겠다 싶기도 했다. 하지만 결과론적인 총평이기 때문에 패스)\n대회 개요    수력 원자력 공사인데 배경은 풍력 발전 ... ?   \u0026nbsp\n원자력발전소 상태 판단 대회는 한국수력원자력(주)에서 제공한 발전소 모의 운전 데이터를 통해 원자력 발전소의 상태를 판단하는 것이 태스크로 주어진다.\n평가지표 평가 지표는 Log loss 이다. Log loss 값은 0 ~ 1 사이로 산출되며, 낮고 0에 가까울 수록 모델의 예측력이 좋음을 의미한다. (데이콘 측 평가지표 설명 영상)\n$$ \\text{logloss}(\\cdot) = \\frac{-1}{N}\\sum_i^N \\sum_j^M y_{ij} \\log{p_{ij}} $$\n데이터셋 원자력 발전소 모의 데이터는 기본적으로 828개의 발전소 운전 Train 데이터 파일과 각 파일에 부여된 198가지 상태 레이블이 매핑된 Label 파일이 주어진다. 압축을 해제하면 총 81GB에 달했다.\n![]({{ site.baseurl }}/images/2020-07-05-review-dacon-nuclear-competition/2.png)\n   \u0026nbsp\n각각의 파일에 저장된 Train 데이터셋 위의 그림과 같으며, 발전소가 10분 동안 작동한, 즉 1행 당 1초 즉, 600행으로 이루어진 데이터가 주어진다. 모든 데이터셋은 발전소의 상태가 변하기 전 디폴트 상태_A(999) 와 상태가 변한 후 상태_B 데이터를 담고 있으며, 상태_A에서부터 시작된다. 데이터는 0초에서 15초 사이에서 상태가 변하기 시작한다. 따라서 데이터 상태의 변화가 0초에서 발생한다는 말은 상태_A가 없는 좌측의 데이터셋과 같고, 그 이외에는 우측과 같다고 보면 된다.\n   \u0026nbsp\n다만 위의 그림과 같이, 실제로는 몇 초부터 상태가 변하는지에 대한 정보가 주어지지 않기 때문에, 각 데이터셋이 좌측과 같은지 우측과 같은지는 한 눈에 판단이 어렵다.\n데이터 전처리 EDA 과정에서 의미 있는 인사이트를 도출해내지 못 했다. 그리고 대회 경험이 적고 시간이 촉박했던 관계로, 바로 전처리에 돌입했다.\n Label이 999 인 경우 제외한다. 10분 간의 운전 데이터 기록 컬럼 내 unique한 값이 데이터셋 중 str타입의 데이터가 발생할 경우 NaN 치환한다. 마지막으로 NaN 데이터는 0으로 채운다. Train / Eval 데이터셋은 3:1의 비율로 분리한다.  #1 train = train[train['label']!=999].reset_index(drop=True) train_label = train.label train = train.drop(['id','time','label'], axis=1) #2 with open('filter_col.txt', 'r') as filehandle: list_ = filehandle.readlines() list_ = [col.replace('\\n', '') for col in list_] train= train[list_] # 3 for col in train.columns: if train[col].dtype != 'float64': train[col] = pd.to_numeric(train[col], errors='coerce') #4 train = train.fillna(value=0, axis=1) #5 X_train, X_valid = train_test_split(train, test_size = .25, random_state=42) y_train, y_valid = train_test_split(train_label, test_size = .25, random_state=42) 모델 모델은 LightGBM을 선택했다. Tabular dataset의 분류 문제에는 나무모형 기반의 모델이 가장 적합했고, LightGBM, XGBoost, Random Forest를 초기 테스트 한 결과 LightGBM이 가장 빠르고 성능이 좋았기 때문이다.\n부스팅 방법으로는 가장 기본적인 Gradient Boosted Decision Tree를 선택했다. 또한 데이터셋이 커서 연산이 큰 문제와 오버피팅을 방지하기 위해 bagging_fraction, feature_fraction 파라미터의 설정으로 데이터셋의 행과 열을 0.5 비율로 고정하여 학습 중 샘플링할 수 있도록 했다.\n그 외 objective, num_class, metric과 같이 대회의 목적에 맞게 변경한 파라미터를 제외하고는 default를 가져온 것들이 대부분이다.\nimport lightgbm as lgb X_train = X_train.to_numpy() X_valid = X_valid.to_numpy() y_train = y_train.to_numpy() y_valid = y_valid.to_numpy() train_data = lgb.Dataset(X_train, label=y_train) #, feature_name=X_train.columns) valid_data = lgb.Dataset(X_valid, label=y_valid) #, feature_name=X_valid.columns) param = { 'objective': 'multiclass', 'num_class': 198, 'boosting':'gbdt', 'num_leaves':32, 'max_depth':20, 'min_data_in_leaf':20, 'metric':'multi_logloss', 'learning_rate' : 0.01, 'verbose' : -1, 'bagging_freq' : 1, 'bagging_fraction' : 0.5, 'feature_fraction' : 0.5, } evals_result={} num_round = 2000 lgbst = lgb.train(params=param, train_set=train_data, num_boost_round=num_round, valid_sets=[valid_data], evals_result=evals_result, early_stopping_rounds=1000, verbose_eval=10) lgbst.save_model('model_lgb.txt', num_iteration=lgbst.best_iteration) 결과 결과는 가채점 기준 36위 / 201팀, 최종 데이터셋 기준 채점 및 중복 및 부정 제출 등의 여부가 판결 뒤 산출된 최종 순위는 16위 / 187팀를 기록했다. 전체 참가팀만 놓고 보면 1091팀이지만, 실제로 제출한 팀은 20%에 그친 것을 확인할 수 있었다.\n   소감 무엇보다 아쉬운점은 초반의 의욕과는 달리, 데이터사이언스 대회의 best practice를 실습해보지 못 했고, 제출과 점수에 급급한 채로 마무리 했다는 점이다. 시간 부족과 의사소통 부재로 EDA 깊이 있게 하지 못 했고, Hyperparameter tuning과 grid search를 제대로 시행하지 못 햇다.\n마지막으로, 이번 원자력발전소 상태 판단 대회 참가는 데이터사이언스 관련 대회 경험을 쌓기 위해서였지만, 한편으로는 전혀 접하지 못 했던 원자력발전소 관련 데이터를 접하고 발전소 관련 도메인을 조금이나마 얻기 위함이기도 했다. 그러나 데이터셋의 컬럼은 모두 비식별 처리가 되어 있어 무엇을 의미하는지 데이터의 특성과 정보에 대한 접근이 불가했다는 점이 대회를 참가하는 와중에 흥미가 조금 깎이게 된 요인이 되지 않았나 하는 생각이 든다.\n어쨌거나 저쨌거나 완주를 했고, 상위 10% 내 라는 기대도 하지 않았던 성적으로 마무리를 했기 때문에 여기에 의의를 두며, 다음에 참가하는 데이터사이언스 대회는 이번에 아쉬웠던 점들이 꼭 보완될 수 있도록 다짐을 해본다.\n","wordCount":"697","inLanguage":"en","datePublished":"2020-07-05T14:24:01+09:00","dateModified":"2020-07-05T14:24:01+09:00","author":{"@type":"Person","name":"Wonyoung Seo"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lucaseo.github.io/posts/2020-07-05-review-dacon-nuclear-competition/"},"publisher":{"@type":"Organization","name":"Wonyoung's Tech Blog","logo":{"@type":"ImageObject","url":"https://lucaseo.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}</script><noscript><style type=text/css>.theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://lucaseo.github.io/ accesskey=h title="Tech Blog (Alt + H)">Tech Blog</a>
<span class=logo-switches><a id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></a></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://lucaseo.github.io/archives/ title=posts><span>posts</span></a></li><li><a href=https://lucaseo.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://lucaseo.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://lucaseo.github.io/about/ title=about><span>about</span></a></li><li><a href=https://lucaseo.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>[KR] 데이콘 원자력발전소 상태 판단 대회 후기</h1><div class=post-meta>July 5, 2020&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Wonyoung Seo</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#%eb%8c%80%ed%9a%8c-%ea%b0%9c%ec%9a%94 aria-label="대회 개요">대회 개요</a><ul><li><a href=#%ed%8f%89%ea%b0%80%ec%a7%80%ed%91%9c aria-label=평가지표>평가지표</a></li><li><a href=#%eb%8d%b0%ec%9d%b4%ed%84%b0%ec%85%8b aria-label=데이터셋>데이터셋</a></li></ul></li><li><a href=#%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a0%84%ec%b2%98%eb%a6%ac aria-label="데이터 전처리">데이터 전처리</a></li><li><a href=#%eb%aa%a8%eb%8d%b8 aria-label=모델>모델</a></li><li><a href=#%ea%b2%b0%ea%b3%bc aria-label=결과>결과</a></li><li><a href=#%ec%86%8c%ea%b0%90 aria-label=소감>소감</a></li></ul></div></details></div><div class=post-content><p>연초, 의욕으로 가득하던 시기에 지인의 권유로 데이콘(<a href=https://dacon.io/ target=_blank>Dacon.io</a>)에서 주관하고 한국수력원자력에서 주최한 <a href=https://www.dacon.io/competitions/official/235551/overview/rules/ target=_blank>원자력발전소 상태판단 경진대회</a>에 참가하게 되었다. 지인의 지인도 합류하여 팀은 총 3인으로 구성되었다. 하지만 개개인의 일정과 생업으로 인해서 진행은 각자 하되, 진행사항이나 인사이트 등은 수시로 공유하고, 제출은 팀의 이름으로 제출하는 형식으로 진행되었다. (<del>초기의 으쌰으쌰하던 분위기와 달리 흐지부지된 감이 없잖아 있었다. 팀당 제출횟수가 하루 3회로 제한되었기 때문에, 이럴 줄 알았으면 애초에 각자의 이름으로 혼자 해도 됐겠다 싶기도 했다. 하지만 결과론적인 총평이기 때문에 패스</del>)</p><h1 id=대회-개요>대회 개요<a hidden class=anchor aria-hidden=true href=#대회-개요>#</a></h1><figure><center><img src=/2020-07-05-review-dacon-nuclear-competition/1.png></center> <center><figcaption>수력 원자력 공사인데 배경은 풍력 발전 ... ?</figcaption></center></figure><p>&nbsp</p><p>원자력발전소 상태 판단 대회는 한국수력원자력(주)에서 제공한 발전소 모의 운전 데이터를 통해 원자력 발전소의 상태를 판단하는 것이 태스크로 주어진다.</p><h2 id=평가지표>평가지표<a hidden class=anchor aria-hidden=true href=#평가지표>#</a></h2><p>평가 지표는 Log loss 이다. Log loss 값은 0 ~ 1 사이로 산출되며, 낮고 0에 가까울 수록 모델의 예측력이 좋음을 의미한다. (<a href=https://youtu.be/i5U2inxzXx4 target=_blank>데이콘 측 평가지표 설명 영상</a>)</p><p>$$ \text{logloss}(\cdot) = \frac{-1}{N}\sum_i^N \sum_j^M y_{ij} \log{p_{ij}} $$</p><h2 id=데이터셋>데이터셋<a hidden class=anchor aria-hidden=true href=#데이터셋>#</a></h2><p>원자력 발전소 모의 데이터는 기본적으로 828개의 발전소 운전 Train 데이터 파일과 각 파일에 부여된 198가지 상태 레이블이 매핑된 Label 파일이 주어진다. 압축을 해제하면 총 81GB에 달했다.</p><p>![]({{ site.baseurl }}/images/2020-07-05-review-dacon-nuclear-competition/2.png)</p><figure><center><img src=/2020-07-05-review-dacon-nuclear-competition/2.png></center></figure><p>&nbsp</p><p>각각의 파일에 저장된 Train 데이터셋 위의 그림과 같으며, 발전소가 10분 동안 작동한, 즉 1행 당 1초 즉, 600행으로 이루어진 데이터가 주어진다. 모든 데이터셋은 발전소의 상태가 변하기 전 디폴트 상태_A(999) 와 상태가 변한 후 상태_B 데이터를 담고 있으며, 상태_A에서부터 시작된다. 데이터는 0초에서 15초 사이에서 상태가 변하기 시작한다. 따라서 데이터 상태의 변화가 0초에서 발생한다는 말은 상태_A가 없는 좌측의 데이터셋과 같고, 그 이외에는 우측과 같다고 보면 된다.</p><figure><center><img src=/2020-07-05-review-dacon-nuclear-competition/3.png></center></figure><p>&nbsp</p><p>다만 위의 그림과 같이, 실제로는 몇 초부터 상태가 변하는지에 대한 정보가 주어지지 않기 때문에, 각 데이터셋이 좌측과 같은지 우측과 같은지는 한 눈에 판단이 어렵다.</p><h1 id=데이터-전처리>데이터 전처리<a hidden class=anchor aria-hidden=true href=#데이터-전처리>#</a></h1><p>EDA 과정에서 의미 있는 인사이트를 도출해내지 못 했다. 그리고 대회 경험이 적고 시간이 촉박했던 관계로, 바로 전처리에 돌입했다.</p><ol><li>Label이 999 인 경우 제외한다.</li><li>10분 간의 운전 데이터 기록 컬럼 내 unique한 값이 &lt; 10 인 컬럼은 제외한다.</li><li>데이터셋 중 str타입의 데이터가 발생할 경우 NaN 치환한다.</li><li>마지막으로 NaN 데이터는 0으로 채운다.</li><li>Train / Eval 데이터셋은 3:1의 비율로 분리한다.</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e>#1</span>
train <span style=color:#f92672>=</span> train[train[<span style=color:#e6db74>&#39;label&#39;</span>]<span style=color:#f92672>!=</span><span style=color:#ae81ff>999</span>]<span style=color:#f92672>.</span>reset_index(drop<span style=color:#f92672>=</span>True)
train_label <span style=color:#f92672>=</span> train<span style=color:#f92672>.</span>label
train <span style=color:#f92672>=</span> train<span style=color:#f92672>.</span>drop([<span style=color:#e6db74>&#39;id&#39;</span>,<span style=color:#e6db74>&#39;time&#39;</span>,<span style=color:#e6db74>&#39;label&#39;</span>], axis<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>)

<span style=color:#75715e>#2</span>
<span style=color:#66d9ef>with</span> open(<span style=color:#e6db74>&#39;filter_col.txt&#39;</span>, <span style=color:#e6db74>&#39;r&#39;</span>) <span style=color:#66d9ef>as</span> filehandle:
    list_ <span style=color:#f92672>=</span> filehandle<span style=color:#f92672>.</span>readlines()
list_ <span style=color:#f92672>=</span> [col<span style=color:#f92672>.</span>replace(<span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>) <span style=color:#66d9ef>for</span> col <span style=color:#f92672>in</span> list_]
train<span style=color:#f92672>=</span> train[list_]


<span style=color:#75715e># 3</span>
<span style=color:#66d9ef>for</span> col <span style=color:#f92672>in</span> train<span style=color:#f92672>.</span>columns:
    <span style=color:#66d9ef>if</span> train[col]<span style=color:#f92672>.</span>dtype <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#39;float64&#39;</span>:
        train[col] <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>to_numeric(train[col], errors<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;coerce&#39;</span>)

<span style=color:#75715e>#4</span>
train <span style=color:#f92672>=</span> train<span style=color:#f92672>.</span>fillna(value<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>, axis<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>)


<span style=color:#75715e>#5</span>
X_train, X_valid <span style=color:#f92672>=</span> train_test_split(train, test_size <span style=color:#f92672>=</span> <span style=color:#f92672>.</span><span style=color:#ae81ff>25</span>, random_state<span style=color:#f92672>=</span><span style=color:#ae81ff>42</span>)
y_train, y_valid <span style=color:#f92672>=</span> train_test_split(train_label, test_size <span style=color:#f92672>=</span> <span style=color:#f92672>.</span><span style=color:#ae81ff>25</span>, random_state<span style=color:#f92672>=</span><span style=color:#ae81ff>42</span>)
</code></pre></div><h1 id=모델>모델<a hidden class=anchor aria-hidden=true href=#모델>#</a></h1><p>모델은 LightGBM을 선택했다. Tabular dataset의 분류 문제에는 나무모형 기반의 모델이 가장 적합했고, LightGBM, XGBoost, Random Forest를 초기 테스트 한 결과 LightGBM이 가장 빠르고 성능이 좋았기 때문이다.</p><p>부스팅 방법으로는 가장 기본적인 Gradient Boosted Decision Tree를 선택했다. 또한 데이터셋이 커서 연산이 큰 문제와 오버피팅을 방지하기 위해 <code>bagging_fraction</code>, <code>feature_fraction</code> 파라미터의 설정으로 데이터셋의 행과 열을 0.5 비율로 고정하여 학습 중 샘플링할 수 있도록 했다.</p><p>그 외 <code>objective</code>, <code>num_class</code>, <code>metric</code>과 같이 대회의 목적에 맞게 변경한 파라미터를 제외하고는 default를 가져온 것들이 대부분이다.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> lightgbm <span style=color:#f92672>as</span> lgb

X_train <span style=color:#f92672>=</span> X_train<span style=color:#f92672>.</span>to_numpy()
X_valid <span style=color:#f92672>=</span> X_valid<span style=color:#f92672>.</span>to_numpy()
y_train <span style=color:#f92672>=</span> y_train<span style=color:#f92672>.</span>to_numpy()
y_valid <span style=color:#f92672>=</span> y_valid<span style=color:#f92672>.</span>to_numpy()

train_data <span style=color:#f92672>=</span> lgb<span style=color:#f92672>.</span>Dataset(X_train, label<span style=color:#f92672>=</span>y_train) <span style=color:#75715e>#, feature_name=X_train.columns)</span>
valid_data <span style=color:#f92672>=</span> lgb<span style=color:#f92672>.</span>Dataset(X_valid, label<span style=color:#f92672>=</span>y_valid) <span style=color:#75715e>#, feature_name=X_valid.columns)</span>

param <span style=color:#f92672>=</span> {
  <span style=color:#e6db74>&#39;objective&#39;</span>: <span style=color:#e6db74>&#39;multiclass&#39;</span>,
  <span style=color:#e6db74>&#39;num_class&#39;</span>: <span style=color:#ae81ff>198</span>,
  <span style=color:#e6db74>&#39;boosting&#39;</span>:<span style=color:#e6db74>&#39;gbdt&#39;</span>,  
  <span style=color:#e6db74>&#39;num_leaves&#39;</span>:<span style=color:#ae81ff>32</span>,
  <span style=color:#e6db74>&#39;max_depth&#39;</span>:<span style=color:#ae81ff>20</span>,
  <span style=color:#e6db74>&#39;min_data_in_leaf&#39;</span>:<span style=color:#ae81ff>20</span>,
  <span style=color:#e6db74>&#39;metric&#39;</span>:<span style=color:#e6db74>&#39;multi_logloss&#39;</span>, 
  <span style=color:#e6db74>&#39;learning_rate&#39;</span> : <span style=color:#ae81ff>0.01</span>,
  <span style=color:#e6db74>&#39;verbose&#39;</span> : <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,
  <span style=color:#e6db74>&#39;bagging_freq&#39;</span> : <span style=color:#ae81ff>1</span>,
  <span style=color:#e6db74>&#39;bagging_fraction&#39;</span> : <span style=color:#ae81ff>0.5</span>,
  <span style=color:#e6db74>&#39;feature_fraction&#39;</span> : <span style=color:#ae81ff>0.5</span>,
}
evals_result<span style=color:#f92672>=</span>{} 
num_round <span style=color:#f92672>=</span> <span style=color:#ae81ff>2000</span>
lgbst <span style=color:#f92672>=</span> lgb<span style=color:#f92672>.</span>train(params<span style=color:#f92672>=</span>param, 
                  train_set<span style=color:#f92672>=</span>train_data, 
                  num_boost_round<span style=color:#f92672>=</span>num_round, 
                  valid_sets<span style=color:#f92672>=</span>[valid_data], 
                  evals_result<span style=color:#f92672>=</span>evals_result, 
                  early_stopping_rounds<span style=color:#f92672>=</span><span style=color:#ae81ff>1000</span>, 
                  verbose_eval<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>)
lgbst<span style=color:#f92672>.</span>save_model(<span style=color:#e6db74>&#39;model_lgb.txt&#39;</span>, num_iteration<span style=color:#f92672>=</span>lgbst<span style=color:#f92672>.</span>best_iteration)
</code></pre></div><h1 id=결과>결과<a hidden class=anchor aria-hidden=true href=#결과>#</a></h1><p>결과는 가채점 기준 36위 / 201팀, 최종 데이터셋 기준 채점 및 중복 및 부정 제출 등의 여부가 판결 뒤 산출된 최종 순위는 <strong>16위</strong> / 187팀를 기록했다. 전체 참가팀만 놓고 보면 1091팀이지만, 실제로 제출한 팀은 20%에 그친 것을 확인할 수 있었다.</p><figure><center><img src=/2020-07-05-review-dacon-nuclear-competition/9.png></center></figure><h1 id=소감>소감<a hidden class=anchor aria-hidden=true href=#소감>#</a></h1><p>무엇보다 아쉬운점은 초반의 의욕과는 달리, 데이터사이언스 대회의 best practice를 실습해보지 못 했고, 제출과 점수에 급급한 채로 마무리 했다는 점이다. 시간 부족과 의사소통 부재로 EDA 깊이 있게 하지 못 했고, Hyperparameter tuning과 grid search를 제대로 시행하지 못 햇다.</p><p>마지막으로, 이번 원자력발전소 상태 판단 대회 참가는 데이터사이언스 관련 대회 경험을 쌓기 위해서였지만, 한편으로는 전혀 접하지 못 했던 원자력발전소 관련 데이터를 접하고 발전소 관련 도메인을 조금이나마 얻기 위함이기도 했다. 그러나 데이터셋의 컬럼은 모두 비식별 처리가 되어 있어 무엇을 의미하는지 데이터의 특성과 정보에 대한 접근이 불가했다는 점이 대회를 참가하는 와중에 흥미가 조금 깎이게 된 요인이 되지 않았나 하는 생각이 든다.</p><p>어쨌거나 저쨌거나 완주를 했고, 상위 10% 내 라는 기대도 하지 않았던 성적으로 마무리를 했기 때문에 여기에 의의를 두며, 다음에 참가하는 데이터사이언스 대회는 이번에 아쉬웠던 점들이 꼭 보완될 수 있도록 다짐을 해본다.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://lucaseo.github.io/tags/competition/>competition</a></li><li><a href=https://lucaseo.github.io/tags/dacon/>dacon</a></li></ul></footer></article></main><footer class=footer><span>© Wonyoung Seo 2023</span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>